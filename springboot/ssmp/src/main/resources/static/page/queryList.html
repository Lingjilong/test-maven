<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet"
          href="../js/bootstrap/css/bootstrap.min.css">
    <!-- 引入ElementUI的css样式 -->
    <link rel="stylesheet" href="../js/element-ui/index.css">

    <title>数据查询页面</title>
</head>
<body>
<div id="app">
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
        <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingOne">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true"
                       aria-controls="collapseOne">
                        条件查询
                    </a>
                </h4>
            </div>
            <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                <div class="panel-body">
                    <form class="form-horizontal" role="form">
                        <div class="form-group">
                            <label for="id" class="col-sm-2 control-label">顾问编号:</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="id" name="id" v-model="id">
                            </div>
                            <label for="name" class="col-sm-2 control-label">顾问姓名:</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="name" name="name" v-model="name">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-5"></div>
                            <div class="col-sm-2">
                                <button type="button" class="btn btn-primary" @click="queryPageList">查询</button>
                                <button type="button" class="btn btn-primary" >重置</button>
                            </div>
                            <div class="col-sm-5"></div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
    <el-table
            :data="EmpList"
            height="300"
            border
            style="width: 90%">
        <el-table-column
                prop="id"
                label="顾问编号"
                width="200">
        </el-table-column>
        <el-table-column
                prop="name"
                label="顾问姓名"
                width="200">
        </el-table-column>
        <el-table-column
                prop="birth"
                label="生日"
                width="200">
        </el-table-column>

        <el-table-column
                fixed="right"
                label="操作"
                width="100">
            <template slot-scope="scope">
                <el-button type="text" @click="open(scope.row)">编辑</el-button>
            </template>
        </el-table-column>
    </el-table>
    <div class="block">
        <el-pagination class = "pagination"
                @size-change="handleSizeChange"
                @current-change="handleCurrentChange"
                :current-page="pageNumber"
                :page-sizes="[3 ,5, 8, 10]"
                :page-size="pageSize"
                layout="sizes, prev, pager, next, jumper,total"
                :total="total">
        </el-pagination>
    </div>
</div>
<!-- vue库 -->
<script src="../js/vue/vue.js" type="text/javascript"></script>
<script src="../js/element-ui/index.js" type="text/javascript"></script>
<!-- jQuery -->
<script src="../js/jquery/jquery.min.js" type="text/javascript"></script>
<!-- Axios库 -->
<script src="../js/axios/axios.js" type="text/javascript"></script>
<!-- Bootstrap -->
<script type="text/javascript">
    let vm = new Vue({
        el: '#app',
        data: {
            EmpList: [],
            total: 0,
            pageNumber:1,
            pageSize:3,
            id:'',
            name:''
        },
        methods: {
            // open(row) {
            //     const h = this.$createElement;
            //     this.$msgbox({
            //         title: '修改日薪',
            //         message: h('p', null, [
            //             h('span', null, ' ')
            //         ]),
            //         showCancelButton: true,
            //         confirmButtonText: '确定',
            //         cancelButtonText: '取消',
            //         beforeClose: (action, instance, done) => {
            //             if (action === 'confirm') {
            //                 instance.confirmButtonLoading = true;
            //                 instance.confirmButtonText = '执行中...';
            //                 setTimeout(() => {
            //                     done();
            //                     setTimeout(() => {
            //                         instance.confirmButtonLoading = false;
            //                     }, 300);
            //                 }, 3000);
            //             } else {
            //                 done();
            //             }
            //         }
            //     }).then(action => {
            //         this.$message({
            //             type: 'info',
            //             message: 'action: ' + action
            //         });
            //     });
            // },

            queryPageList() {
                let url = '/students/'+this.pageNumber+'/'+this.pageSize
                axios.get(url).then(res => {
                    this.total= res.data.data.total
                    this.pageNumber= res.data.data.current
                    this.pageSize= res.data.data.size
                    this.EmpList = res.data.data.records
                    }
                ).catch(error => {
                    console.log(error)
                })
            },
            handleSizeChange(val) {
                //console.log(`每页 ${val} 条`);
                this.pageSize = val
                this.queryPageList()
            },
            handleCurrentChange(val) {
                this.pageNumber = val
                this.queryPageList()
            },
        },
        created() {
            this.queryPageList()
        }
    })


</script>


</body>
</html>